/*! v:42669 b:default c:errorCounter */
(window["pcodeJsonp42669oPhBev4jpp"]=window["pcodeJsonp42669oPhBev4jpp"]||[]).push([[21],{462:function(e,r,n){function t(){var e;this.getSetting=function(e){var r=this._errorSettings[e];return null===r?null:r||""},function(e,r){var t={client:["690.2354",1e3,100,0],uncaught:["690.2361",100,10,0],external:["690.2854",100,10,0],script:["690.2609",100,10,0]},o={};r.ERROR_LEVEL={INFO:"info",DEBUG:"debug",WARN:"warn",ERROR:"error",FATAL:"fatal"},r._errorSettings={clck:"https://yandex.ru/clck/click",beacon:!0,project:"unknown",page:"",env:"",experiments:[],additional:{},platform:"",region:"",dc:"",service:"",level:"",version:"",yandexuid:"",coordinates_gp:"",referrer:"",preventError:!1,unhandledRejection:!1,uncaughtException:!0,debug:!1,limits:{},silent:{},filters:{},pageMaxAge:864e6,initTimestamp:+new Date};var a=!1;function i(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n]);return e}function s(e){return"boolean"==typeof e&&(e=+e),"number"==typeof e?e+"":null}r.initErrors=function(n){i(r._errorSettings,n),!a&&r._errorSettings["uncaughtException"]&&(!function(){if(e.addEventListener)e.addEventListener("error",c),"Promise"in e&&r._errorSettings.unhandledRejection&&e.addEventListener("unhandledrejection",(function(e){var r,n=e.reason,t={};n&&(n.stack&&n.message?r=n.message:"[object Event]"===(r=String(n))?r="event.type: "+n.type:"[object Object]"===r&&(t.unhandledObject=n),n.target&&n.target.src&&(t.src=n.target.src),c({message:"Unhandled rejection: "+r,stack:n.stack,additional:t}))}));else{var n=e.onerror;e.onerror=function(e,r,t,o,a){c({error:a||new Error(e||"Empty error"),message:e,lineno:t,colno:o,filename:r}),n&&n.apply(this,arguments)}}}(),a=!0)},r.updateErrors=function(e){i(r._errorSettings,e)},r._handleError=function(e,n){var a,i,s=r._errorSettings;if(s.preventError&&e.preventDefault&&e.preventDefault(),n)a=e,i="client";else{a=r._normalizeError(e),i=a.type;var c=s.onError;"function"==typeof c&&c(a);var l=s.transform;"function"==typeof l&&(a=l(a))}var u=+new Date,d=s.initTimestamp,p=s.pageMaxAge;if(!(-1!==p&&d&&d+p<u)){var f=t[i][1];"number"==typeof s.limits[i]&&(f=s.limits[i]);var g=t[i][2];"number"==typeof s.silent[i]&&(g=s.silent[i]);var m=t[i][3];if(m<f||-1===f){a.path=t[i][0];var v=r._getErrorData(a,{silent:m<g||-1===g?"no":"yes",isCustom:Boolean(n)},s),h=function(e){o[a.message]=!1,r._sendError(e.path,e.vars),t[i][3]++}.bind(this,v);if(void 0===s.throttleSend)h();else{if(o[a.message])return;o[a.message]=!0,setTimeout(h,s.throttleSend)}}}},r._getErrorData=function(r,t,o){t=t||{};var a="";try{var c=i(i({},o.additional),r.additional);0!==Object.keys(c).length&&(a=n.lv["json"].stringify(c))}catch(r){o.debug&&e.console&&console.error("[error-counter] json.stringify:",r)}var l=o.experiments instanceof Array?o.experiments.join(";"):"",u={"-stack":r.stack,"-url":r.file,"-line":r.line,"-col":r.col,"-block":r.block,"-method":r.method,"-msg":r.message,"-env":o.env,"-external":r.external,"-externalCustom":r.externalCustom,"-project":o.project,"-service":r.service||o.service,"-page":r.page||o.page,"-platform":o.platform,"-level":r.level,"-experiments":l,"-version":o.version,"-region":o.region,"-dc":o.dc,"-yandexuid":o.yandexuid,"-coordinates_gp":r.coordinates_gp||o.coordinates_gp,"-referrer":o.referrer,"-source":r.source,"-sourceMethod":r.sourceMethod,"-type":t.isCustom?r.type:"","-additional":a,"-adb":s(Ya.blocker)||s(o.blocker),"-cdn":e.YaStaticRegion,"-ua":navigator.userAgent,"-silent":t.silent,"-ts":+new Date,"-init-ts":o.initTimestamp};return o.debug&&e.console&&console[console[r.level]?r.level:"error"]("[error-counter] "+r.message,u,r.stack),{path:r.path,vars:u}},r._baseNormalizeError=function(e){var r=(e=e||{}).filename||e.fileName||"",n=e.error&&e.error.stack||e.stack||"",t=e.message||"";return{file:r,line:e.lineno||e.lineNumber,col:e.colno||e.colNumber,stack:n,message:t,additional:e.additional}},r._normalizeError=function(e){var n=r._baseNormalizeError(e),t="uncaught",o=r._isExternalError(n.file,n.message,n.stack),a="",i="";return o.hasExternal?(t="external",a=o.common,i=o.custom):/^Script error\.?$/.test(n.message)&&(t="script"),n.external=a,n.externalCustom=i,n.type=t,n},r._sendError=function(e,n){r.send(null,e,function(e){var r=[];for(var n in e)e.hasOwnProperty(n)&&(e[n]||0===e[n])&&r.push(n+"="+encodeURIComponent(e[n]).replace(/\*/g,"%2A"));return r.join(",")}(n),null,null,null,null)};var c=function(e){r._handleError(e,!1)}}("undefined"!=typeof self?self:window,this),(e=this).logError=function(r,n){r=r||{},"string"!=typeof n&&void 0!==n||((n=new Error(n)).justCreated=!0);var t=r.message||"",o=e._baseNormalizeError(n);o.message&&(t&&(t+="; "),t+=o.message),o.message=t||"Empty error";for(var a=["service","source","type","block","additional","level","page","method","sourceMethod","coordinates_gp"],i=0;i<a.length;i++){var s=a[i];r[s]?o[s]=r[s]:n&&n[s]&&(o[s]=n[s])}e._handleError(o,!0)},function(e){function r(){var r=e.getSetting("clck"),n=e.countersBatchData.join("\r\n");if((e.countersBatchData=[],e.counterTimerId=null,r)&&!(navigator.sendBeacon&&e.getSetting("beacon")&&navigator.sendBeacon(r,n)))if("undefined"!=typeof self&&self.fetch)fetch(r,{method:"POST",body:n});else{var t=new XMLHttpRequest;t.open("POST",r),t.send(n)}}e.countersBatchData=[],e.counterTimerId,e.send=function(n,t,o,a,i,s,c){clearTimeout(e.counterTimerId);var l=function(r,n,t,o,a,i){var s=e.getSetting("slots");return[i?"/"+i.join("/"):"","/path="+n,s?"/slots="+s.join(";"):"",t?"/vars="+t:"","/cts="+(new Date).getTime(),"/*"]}(0,t,o,0,0,c);e.countersBatchData.push("/reqid="+e.getSetting("reqid")+l.join("")),e.countersBatchData.length<42?e.counterTimerId=setTimeout(r,15):r()}}(this),function(e){var r={url:{0:/(miscellaneous|extension)_bindings/,1:/^chrome:/,2:/kaspersky-labs\.com\//,3:/^(?:moz|chrome)-extension:\/\//,4:/^file:/,5:/^resource:\/\//,6:/webnetc\.top/,7:/local\.adguard\.com/},message:{0:/__adgRemoveDirect/,1:/Content Security Policy/,2:/vid_mate_check/,3:/ucapi/,4:/Access is denied/i,5:/^Uncaught SecurityError/i,6:/__ybro/,7:/__show__deepen/,8:/ntp is not defined/,9:/Cannot set property 'install' of undefined/,10:/NS_ERROR/,11:/Error loading script/,12:/^TypeError: undefined is not a function$/,13:/__firefox__\.(?:favicons|metadata|reader|searchQueryForField|searchLoginField)/},stack:{0:/(?:moz|chrome)-extension:\/\//,1:/adguard.*\.user\.js/i}};function n(e,r){if(e&&r){var n=[];for(var t in r)if(r.hasOwnProperty(t)){var o=r[t];"string"==typeof o&&(o=new RegExp(o)),o instanceof RegExp&&o.test(e)&&n.push(t)}return n.join("_")}}function t(e,t){var o,a=[];for(var i in r)r.hasOwnProperty(i)&&(o=n(e[i],t[i]))&&a.push(i+"~"+o);return a.join(";")}e._isExternalError=function(n,o,a){var i=e._errorSettings.filters||{},s={url:(n||"")+"",message:(o||"")+"",stack:(a||"")+""},c=t(s,r),l=t(s,i);return{common:c,custom:l,hasExternal:!(!c&&!l)}}}(this)}window.Ya=window.Ya||{},void 0!==e.exports?(e.exports=t,e.exports.default=t):window.Ya.ErrorLogger=t}}]);