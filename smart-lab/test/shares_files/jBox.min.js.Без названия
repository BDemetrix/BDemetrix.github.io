(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery"],function(c){return(a.jBox=b(c));});}else{if(typeof module==="object"&&module.exports){module.exports=(a.jBox=b(require("jquery")));
}else{a.jBox=b(a.jQuery);}}}(this,function(b){var a=function a(d,c){this.options={id:null,width:"auto",height:"auto",minWidth:null,minHeight:null,maxWidth:null,maxHeight:null,responsiveWidth:true,responsiveHeight:true,responsiveMinWidth:100,responsiveMinHeight:100,attach:null,trigger:"click",preventDefault:false,content:null,getContent:null,title:null,getTitle:null,footer:null,isolateScroll:true,ajax:{url:null,data:"",reload:false,getURL:"data-url",getData:"data-ajax",setContent:true,spinner:true,spinnerDelay:300,spinnerReposition:true},followMouse:false,target:null,position:{x:"center",y:"center"},outside:null,offset:0,attributes:{x:"left",y:"top"},fixed:false,adjustPosition:true,adjustTracker:false,adjustDistance:5,reposition:true,repositionOnOpen:true,repositionOnContent:true,pointer:false,pointTo:"target",fade:180,animation:null,theme:"Default",addClass:null,overlay:false,zIndex:10000,delayOpen:0,delayClose:0,closeOnEsc:false,closeOnClick:false,closeOnMouseleave:false,closeButton:false,appendTo:b("body"),createOnInit:false,blockScroll:false,draggable:false,dragOver:true,autoClose:false,delayOnHover:false,showCountdown:false,preloadAudio:true,audio:null,volume:100,onInit:null,onAttach:null,onPosition:null,onCreated:null,onOpen:null,onClose:null,onCloseComplete:null};
this._pluginOptions={Tooltip:{getContent:"title",trigger:"mouseenter",position:{x:"center",y:"top"},outside:"y",pointer:true},Mouse:{responsiveWidth:false,responsiveHeight:false,adjustPosition:"flip",target:"mouse",trigger:"mouseenter",position:{x:"right",y:"bottom"},outside:"xy",offset:5},Modal:{target:b(window),fixed:true,blockScroll:true,closeOnEsc:true,closeOnClick:"overlay",closeButton:true,overlay:true,animation:"zoomIn"},};
this.options=b.extend(true,this.options,this._pluginOptions[d]?this._pluginOptions[d]:a._pluginOptions[d],c);b.type(d)=="string"&&(this.type=d);this._fireEvent=function(f,e){this.options["_"+f]&&(this.options["_"+f].bind(this))(e);
this.options[f]&&(this.options[f].bind(this))(e);};this.options.id===null&&(this.options.id="jBox"+a._getUniqueID());this.id=this.options.id;((this.options.position.x=="center"&&this.options.outside=="x")||(this.options.position.y=="center"&&this.options.outside=="y"))&&(this.options.outside=null);
this.options.pointTo=="target"&&(!this.options.outside||this.options.outside=="xy")&&(this.options.pointer=false);b.type(this.options.offset)!="object"?(this.options.offset={x:this.options.offset,y:this.options.offset}):(this.options.offset=b.extend({x:0,y:0},this.options.offset));
b.type(this.options.adjustDistance)!="object"?(this.options.adjustDistance={top:this.options.adjustDistance,right:this.options.adjustDistance,bottom:this.options.adjustDistance,left:this.options.adjustDistance}):(this.options.adjustDistance=b.extend({top:5,left:5,right:5,bottom:5},this.options.adjustDistance));
this.outside=this.options.outside&&this.options.outside!="xy"?this.options.position[this.options.outside]:false;this.align=this.outside?this.outside:(this.options.position.y!="center"&&b.type(this.options.position.y)!="number"?this.options.position.x:(this.options.position.x!="center"&&b.type(this.options.position.x)!="number"?this.options.position.y:this.options.attributes.x));
this._getOpp=function(e){return{left:"right",right:"left",top:"bottom",bottom:"top",x:"y",y:"x"}[e];};this._getXY=function(e){return{left:"x",right:"x",top:"y",bottom:"y",center:"x"}[e];
};this._getTL=function(e){return{left:"left",right:"left",top:"top",bottom:"top",center:"left",x:"left",y:"top"}[e];};this._getInt=function(e,f){if(e=="auto"){return"auto";
}if(e&&b.type(e)=="string"&&e.slice(-1)=="%"){return b(window)[f=="height"?"innerHeight":"innerWidth"]()*parseInt(e.replace("%",""))/100;}return e;};this._createSVG=function(g,f){var e=document.createElementNS("http://www.w3.org/2000/svg",g);
b.each(f,function(h,i){e.setAttribute(i[0],(i[1]||""));});return e;};this._isolateScroll=function(e){if(!e||!e.length){return;}e.on("DOMMouseScroll.jBoxIsolateScroll mousewheel.jBoxIsolateScroll",function(h){var i=h.wheelDelta||(h.originalEvent&&h.originalEvent.wheelDelta)||-h.detail;
var g=this.scrollTop+e.outerHeight()-this.scrollHeight>=0;var f=this.scrollTop<=0;((i<0&&g)||(i>0&&f))&&h.preventDefault();});};this._setTitleWidth=function(){if(!this.titleContainer||(this.content[0].style.width=="auto"&&!this.content[0].style.maxWidth)){return null;
}if(this.wrapper.css("display")=="none"){this.wrapper.css("display","block");var e=this.content.outerWidth();this.wrapper.css("display","none");}else{var e=this.content.outerWidth();
}this.titleContainer.css({maxWidth:(Math.max(e,parseInt(this.content[0].style.maxWidth))||null)});};this._draggable=function(){if(!this.options.draggable){return false;
}var e=this.options.draggable=="title"?this.titleContainer:(this.options.draggable instanceof b?this.options.draggable:(b.type(this.options.draggable)=="string"?b(this.options.draggable):this.wrapper));
if(!e||!(e instanceof b)||!e.length||e.data("jBox-draggable")){return false;}e.addClass("jBox-draggable").data("jBox-draggable",true).on("mousedown",function(i){if(i.button==2||b(i.target).hasClass("jBox-noDrag")||b(i.target).parents(".jBox-noDrag").length){return;
}if(this.options.dragOver&&this.wrapper.css("zIndex")<=a.zIndexMax){a.zIndexMax+=1;this.wrapper.css("zIndex",a.zIndexMax);}var j=this.wrapper.outerHeight();
var h=this.wrapper.outerWidth();var f=this.wrapper.offset().top+j-i.pageY;var g=this.wrapper.offset().left+h-i.pageX;b(document).on("mousemove.jBox-draggable-"+this.id,function(k){this.wrapper.offset({top:k.pageY+f-j,left:k.pageX+g-h});
}.bind(this));i.preventDefault();}.bind(this)).on("mouseup",function(){b(document).off("mousemove.jBox-draggable-"+this.id);}.bind(this));a.zIndexMax=!a.zIndexMax?this.options.zIndex:Math.max(a.zIndexMax,this.options.zIndex);
return this;};this._create=function(){if(this.wrapper){return;}this.wrapper=b("<div/>",{id:this.id,"class":"jBox-wrapper"+(this.type?" jBox-"+this.type:"")+(this.options.theme?" jBox-"+this.options.theme:"")+(this.options.addClass?" "+this.options.addClass:"")}).css({position:(this.options.fixed?"fixed":"absolute"),display:"none",opacity:0,zIndex:this.options.zIndex}).data("jBox",this);
this.options.closeOnMouseleave&&this.wrapper.on("mouseleave",function(g){!this.source||!(g.relatedTarget==this.source[0]||b.inArray(this.source[0],b(g.relatedTarget).parents("*"))!==-1)&&this.close();
}.bind(this));(this.options.closeOnClick=="box")&&this.wrapper.on("touchend click",function(){this.close({ignoreDelay:true});}.bind(this));this.container=b('<div class="jBox-container"/>').appendTo(this.wrapper);
this.content=b('<div class="jBox-content"/>').appendTo(this.container);this.options.footer&&(this.footer=b('<div class="jBox-footer"/>').append(this.options.footer).appendTo(this.container));
this.options.isolateScroll&&this._isolateScroll(this.content);if(this.options.closeButton){var f=this._createSVG("svg",[["viewBox","0 0 24 24"]]);f.appendChild(this._createSVG("path",[["d","M22.2,4c0,0,0.5,0.6,0,1.1l-6.8,6.8l6.9,6.9c0.5,0.5,0,1.1,0,1.1L20,22.3c0,0-0.6,0.5-1.1,0L12,15.4l-6.9,6.9c-0.5,0.5-1.1,0-1.1,0L1.7,20c0,0-0.5-0.6,0-1.1L8.6,12L1.7,5.1C1.2,4.6,1.7,4,1.7,4L4,1.7c0,0,0.6-0.5,1.1,0L12,8.5l6.8-6.8c0.5-0.5,1.1,0,1.1,0L22.2,4z"]]));
this.closeButton=b('<div class="jBox-closeButton jBox-noDrag"/>').on("touchend click",function(g){this.close({ignoreDelay:true});}.bind(this)).append(f);
if(this.options.closeButton=="box"||(this.options.closeButton===true&&!this.options.overlay&&!this.options.title&&!this.options.getTitle)){this.wrapper.addClass("jBox-closeButton-box");
this.closeButton.appendTo(this.container);}}this.wrapper.appendTo(this.options.appendTo);this.wrapper.find(".jBox-closeButton").length&&b.each(["top","right","bottom","left"],function(g,h){this.wrapper.find(".jBox-closeButton").css(h)&&this.wrapper.find(".jBox-closeButton").css(h)!="auto"&&(this.options.adjustDistance[h]=Math.max(this.options.adjustDistance[h],this.options.adjustDistance[h]+(((parseInt(this.wrapper.find(".jBox-closeButton").css(h))||0)+(parseInt(this.container.css("border-"+h+"-width"))||0))*-1)));
}.bind(this));if(this.options.pointer){this.pointer={position:(this.options.pointTo!="target")?this.options.pointTo:this._getOpp(this.outside),xy:(this.options.pointTo!="target")?this._getXY(this.options.pointTo):this._getXY(this.outside),align:"center",offset:0};
this.pointer.element=b('<div class="jBox-pointer jBox-pointer-'+this.pointer.position+'"/>').appendTo(this.wrapper);this.pointer.dimensions={x:this.pointer.element.outerWidth(),y:this.pointer.element.outerHeight()};
if(b.type(this.options.pointer)=="string"){var e=this.options.pointer.split(":");e[0]&&(this.pointer.align=e[0]);e[1]&&(this.pointer.offset=parseInt(e[1]));
}this.pointer.alignAttribute=(this.pointer.xy=="x"?(this.pointer.align=="bottom"?"bottom":"top"):(this.pointer.align=="right"?"right":"left"));this.wrapper.css("padding-"+this.pointer.position,this.pointer.dimensions[this.pointer.xy]);
this.pointer.element.css(this.pointer.alignAttribute,(this.pointer.align=="center"?"50%":0)).css("margin-"+this.pointer.alignAttribute,this.pointer.offset);
this.pointer.margin={};this.pointer.margin["margin-"+this.pointer.alignAttribute]=this.pointer.offset;(this.pointer.align=="center")&&this.pointer.element.css("transform","translate("+(this.pointer.xy=="y"?(this.pointer.dimensions.x*-0.5+"px"):0)+", "+(this.pointer.xy=="x"?(this.pointer.dimensions.y*-0.5+"px"):0)+")");
this.pointer.element.css((this.pointer.xy=="x"?"width":"height"),parseInt(this.pointer.dimensions[this.pointer.xy])+parseInt(this.container.css("border-"+this.pointer.alignAttribute+"-width")));
this.wrapper.addClass("jBox-pointerPosition-"+this.pointer.position);}this.setContent(this.options.content,true);this.setTitle(this.options.title,true);
this.options.draggable&&this._draggable();this._fireEvent("onCreated");};this.options.createOnInit&&this._create();this.options.attach&&this.attach();this._attachEvents=function(){this.options.closeOnEsc&&b(document).on("keyup.jBox-"+this.id,function(e){if(e.keyCode==27){this.close({ignoreDelay:true});
}}.bind(this));if(this.options.closeOnClick===true||this.options.closeOnClick=="body"){b(document).on("touchend.jBox-"+this.id+" click.jBox-"+this.id,function(e){if(this.blockBodyClick||(this.options.closeOnClick=="body"&&(e.target==this.wrapper[0]||this.wrapper.has(e.target).length))){return;
}this.close({ignoreDelay:true});}.bind(this));}this.options.delayOnHover&&b("#"+this.id).on("mouseenter",function(e){this.isHovered=true;}.bind(this));
this.options.delayOnHover&&b("#"+this.id).on("mouseleave",function(e){this.isHovered=false;}.bind(this));if((this.options.adjustPosition||this.options.reposition)&&!this.fixed&&this.outside){this.options.adjustTracker&&b(window).on("scroll.jBox-"+this.id,function(e){this.position();
}.bind(this));(this.options.adjustPosition||this.options.reposition)&&b(window).on("resize.jBox-"+this.id,function(e){this.position();}.bind(this));}this.options.target=="mouse"&&b("body").on("mousemove.jBox-"+this.id,function(e){this.position({mouseTarget:{top:e.pageY,left:e.pageX}});
}.bind(this));};this._detachEvents=function(){this.options.closeOnEsc&&b(document).off("keyup.jBox-"+this.id);(this.options.closeOnClick===true||this.options.closeOnClick=="body")&&b(document).off("touchend.jBox-"+this.id+" click.jBox-"+this.id);
this.options.adjustTracker&&b(window).off("scroll.jBox-"+this.id);(this.options.adjustPosition||this.options.reposition)&&b(window).off("resize.jBox-"+this.id);
this.options.target=="mouse"&&b("body").off("mousemove.jBox-"+this.id);};this._showOverlay=function(){if(!this.overlay){this.overlay=b('<div id="'+this.id+'-overlay"/>').addClass("jBox-overlay"+(this.type?" jBox-overlay-"+this.type:"")).css({display:"none",opacity:0,zIndex:this.options.zIndex-1}).appendTo(this.options.appendTo);
(this.options.closeButton=="overlay"||this.options.closeButton===true)&&this.overlay.append(this.closeButton);this.options.closeOnClick=="overlay"&&this.overlay.on("touchend click",function(){this.close({ignoreDelay:true});
}.bind(this));b("#"+this.id+"-overlay .jBox-closeButton").length&&(this.options.adjustDistance.top=Math.max(b("#"+this.id+"-overlay .jBox-closeButton").outerHeight(),this.options.adjustDistance.top));
}if(this.overlay.css("display")=="block"){return;}this.options.fade?(this.overlay.stop()&&this.overlay.animate({opacity:1},{queue:false,duration:this.options.fade,start:function(){this.overlay.css({display:"block"});
}.bind(this)})):this.overlay.css({display:"block",opacity:1});};this._hideOverlay=function(){if(!this.overlay){return;}this.options.fade?(this.overlay.stop()&&this.overlay.animate({opacity:0},{queue:false,duration:this.options.fade,complete:function(){this.overlay.css({display:"none"});
}.bind(this)})):this.overlay.css({display:"none",opacity:0});};this._exposeDimensions=function(){this.wrapper.css({top:-10000,left:-10000,right:"auto",bottom:"auto"});
var e={x:this.wrapper.outerWidth(),y:this.wrapper.outerHeight()};this.wrapper.css({top:"auto",left:"auto"});return e;};this._generateAnimationCSS=function(){(b.type(this.options.animation)!="object")&&(this.options.animation={pulse:{open:"pulse",close:"zoomOut"},zoomIn:{open:"zoomIn",close:"zoomIn"},zoomOut:{open:"zoomOut",close:"zoomOut"},move:{open:"move",close:"move"},slide:{open:"slide",close:"slide"},flip:{open:"flip",close:"flip"},tada:{open:"tada",close:"zoomOut"}}[this.options.animation]);
if(!this.options.animation){return null;}this.options.animation.open&&(this.options.animation.open=this.options.animation.open.split(":"));this.options.animation.close&&(this.options.animation.close=this.options.animation.close.split(":"));
this.options.animation.openDirection=this.options.animation.open[1]?this.options.animation.open[1]:null;this.options.animation.closeDirection=this.options.animation.close[1]?this.options.animation.close[1]:null;
this.options.animation.open&&(this.options.animation.open=this.options.animation.open[0]);this.options.animation.close&&(this.options.animation.close=this.options.animation.close[0]);
this.options.animation.open&&(this.options.animation.open+="Open");this.options.animation.close&&(this.options.animation.close+="Close");var f={pulse:{duration:350,css:[["0%","scale(1)"],["50%","scale(1.1)"],["100%","scale(1)"]]},zoomInOpen:{duration:(this.options.fade||180),css:[["0%","scale(0.9)"],["100%","scale(1)"]]},zoomInClose:{duration:(this.options.fade||180),css:[["0%","scale(1)"],["100%","scale(0.9)"]]},zoomOutOpen:{duration:(this.options.fade||180),css:[["0%","scale(1.1)"],["100%","scale(1)"]]},zoomOutClose:{duration:(this.options.fade||180),css:[["0%","scale(1)"],["100%","scale(1.1)"]]},moveOpen:{duration:(this.options.fade||180),positions:{top:{"0%":-12},right:{"0%":12},bottom:{"0%":12},left:{"0%":-12}},css:[["0%","translate%XY(%Vpx)"],["100%","translate%XY(0px)"]]},moveClose:{duration:(this.options.fade||180),timing:"ease-in",positions:{top:{"100%":-12},right:{"100%":12},bottom:{"100%":12},left:{"100%":-12}},css:[["0%","translate%XY(0px)"],["100%","translate%XY(%Vpx)"]]},slideOpen:{duration:400,positions:{top:{"0%":-400},right:{"0%":400},bottom:{"0%":400},left:{"0%":-400}},css:[["0%","translate%XY(%Vpx)"],["100%","translate%XY(0px)"]]},slideClose:{duration:400,timing:"ease-in",positions:{top:{"100%":-400},right:{"100%":400},bottom:{"100%":400},left:{"100%":-400}},css:[["0%","translate%XY(0px)"],["100%","translate%XY(%Vpx)"]]},flipOpen:{duration:600,css:[["0%","perspective(400px) rotateX(90deg)"],["40%","perspective(400px) rotateX(-15deg)"],["70%","perspective(400px) rotateX(15deg)"],["100%","perspective(400px) rotateX(0deg)"]]},flipClose:{duration:(this.options.fade||300),css:[["0%","perspective(400px) rotateX(0deg)"],["100%","perspective(400px) rotateX(90deg)"]]},tada:{duration:800,css:[["0%","scale(1)"],["10%, 20%","scale(0.9) rotate(-3deg)"],["30%, 50%, 70%, 90%","scale(1.1) rotate(3deg)"],["40%, 60%, 80%","scale(1.1) rotate(-3deg)"],["100%","scale(1) rotate(0)"]]}};
b.each(["pulse","tada"],function(g,h){f[h+"Open"]=f[h+"Close"]=f[h];});var e=function(h,g){keyframe_css="@keyframes jBox-"+this.id+"-animation-"+this.options.animation[h]+"-"+h+(g?"-"+g:"")+" {";
b.each(f[this.options.animation[h]].css,function(i,j){var k=g?j[1].replace("%XY",this._getXY(g).toUpperCase()):j[1];f[this.options.animation[h]].positions&&(k=k.replace("%V",f[this.options.animation[h]].positions[g][j[0]]));
keyframe_css+=j[0]+" {transform:"+k+";}";}.bind(this));keyframe_css+="}";keyframe_css+=".jBox-"+this.id+"-animation-"+this.options.animation[h]+"-"+h+(g?"-"+g:"")+" {";
keyframe_css+="animation-duration: "+f[this.options.animation[h]].duration+"ms;";keyframe_css+="animation-name: jBox-"+this.id+"-animation-"+this.options.animation[h]+"-"+h+(g?"-"+g:"")+";";
keyframe_css+=f[this.options.animation[h]].timing?("animation-timing-function: "+f[this.options.animation[h]].timing+";"):"";keyframe_css+="}";return keyframe_css;
}.bind(this);this._animationCSS="";b.each(["open","close"],function(g,h){if(!this.options.animation[h]||!f[this.options.animation[h]]||(h=="close"&&!this.options.fade)){return"";
}f[this.options.animation[h]].positions?b.each(["top","right","bottom","left"],function(j,i){this._animationCSS+=e(h,i);}.bind(this)):this._animationCSS+=e(h);
}.bind(this));};this.options.animation&&this._generateAnimationCSS();this._blockBodyClick=function(){this.blockBodyClick=true;setTimeout(function(){this.blockBodyClick=false;
}.bind(this),10);};this._animate=function(g){!g&&(g=this.isOpen?"open":"close");if(!this.options.fade&&g=="close"){return null;}var e=(this.options.animation[g+"Direction"]||((this.align!="center")?this.align:this.options.attributes.x));
this.flipped&&this._getXY(e)==(this._getXY(this.align))&&(e=this._getOpp(e));var f="jBox-"+this.id+"-animation-"+this.options.animation[g]+"-"+g+" jBox-"+this.id+"-animation-"+this.options.animation[g]+"-"+g+"-"+e;
this.wrapper.addClass(f);var h=parseFloat(this.wrapper.css("animation-duration"))*1000;g=="close"&&(h=Math.min(h,this.options.fade));setTimeout(function(){this.wrapper.removeClass(f);
}.bind(this),h);};this._abortAnimation=function(){var e=this.wrapper.attr("class").split(" ").filter(function(f){return f.lastIndexOf("jBox-"+this.id+"-animation",0)!==0;
}.bind(this));this.wrapper.attr("class",e.join(" "));};if(this.options.responsiveWidth||this.options.responsiveHeight){b(window).on("resize.responsivejBox-"+this.id,function(e){if(this.isOpen){this.position();
}}.bind(this));}b.type(this.options.preloadAudio)==="string"&&(this.options.preloadAudio=[this.options.preloadAudio]);b.type(this.options.audio)==="string"&&(this.options.audio={open:this.options.audio});
b.type(this.options.volume)==="number"&&(this.options.volume={open:this.options.volume,close:this.options.volume});if(this.options.preloadAudio===true&&this.options.audio){this.options.preloadAudio=[];
b.each(this.options.audio,function(f,e){this.options.preloadAudio.push(e+".mp3");this.options.preloadAudio.push(e+".ogg");}.bind(this));}this.options.preloadAudio.length&&b.each(this.options.preloadAudio,function(f,e){var g=new Audio();
g.src=e;g.preload="auto";});if(this.options.followMouse){b(document).on("mousemove",function(e){this.mouse={x:e.pageX,y:e.pageY};}.bind(this));}this._fireEvent("onInit");
return this;};a.prototype.attach=function(d,c){!d&&(d=this.options.attach);b.type(d)=="string"&&(d=b(d));!c&&(c=this.options.trigger);d&&d.length&&b.each(d,function(e,f){f=b(f);
if(!f.data("jBox-attached-"+this.id)){(this.options.getContent=="title"&&f.attr("title")!=undefined)&&f.data("jBox-getContent",f.attr("title")).removeAttr("title");
this.attachedElements||(this.attachedElements=[]);this.attachedElements.push(f[0]);f.on(c+".jBox-attach-"+this.id,function(h){this.timer&&clearTimeout(this.timer);
if(c=="mouseenter"&&this.isOpen&&this.source[0]==f[0]){return;}if(this.isOpen&&this.source&&this.source[0]!=f[0]){var g=true;}this.source=f;!this.options.target&&(this.target=f);
c=="click"&&this.options.preventDefault&&h.preventDefault();this[c=="click"&&!g?"toggle":"open"]();}.bind(this));(this.options.trigger=="mouseenter")&&f.on("mouseleave",function(g){if(!this.wrapper){return null;
}if(!this.options.closeOnMouseleave||!(g.relatedTarget==this.wrapper[0]||b(g.relatedTarget).parents("#"+this.id).length)){this.close();}}.bind(this));f.data("jBox-attached-"+this.id,c);
this._fireEvent("onAttach",f);}}.bind(this));return this;};a.prototype.detach=function(c){!c&&(c=this.attachedElements||[]);c&&c.length&&b.each(c,function(d,e){e=b(e);
if(e.data("jBox-attached-"+this.id)){e.off(e.data("jBox-attached-"+this.id)+".jBox-attach-"+this.id);e.data("jBox-attached-"+this.id,null);}this.attachedElements=b.grep(this.attachedElements,function(f){return f!=e[0];
});}.bind(this));return this;};a.prototype.setTitle=function(f,c){if(f==null||f==undefined){return this;}!this.wrapper&&this._create();var e=this.wrapper.outerHeight();
var d=this.wrapper.outerWidth();if(!this.title){this.titleContainer=b('<div class="jBox-title"/>');this.title=b("<div/>").appendTo(this.titleContainer);
this.wrapper.addClass("jBox-hasTitle");if(this.options.closeButton=="title"||(this.options.closeButton===true&&!this.options.overlay)){this.wrapper.addClass("jBox-closeButton-title");
this.closeButton.appendTo(this.titleContainer);}this.titleContainer.insertBefore(this.content);this._setTitleWidth();}this.title.html(f);d!=this.wrapper.outerWidth()&&this._setTitleWidth();
this.options.draggable&&this._draggable();!c&&this.options.repositionOnContent&&(e!=this.wrapper.outerHeight()||d!=this.wrapper.outerWidth())&&this.position();
return this;};a.prototype.setContent=function(e,c){if(e==null||e==undefined){return this;}!this.wrapper&&this._create();var f=this.wrapper.outerHeight();
var d=this.wrapper.outerWidth();this.content.children("[data-jbox-content-appended]").appendTo("body").css({display:"none"});switch(b.type(e)){case"string":this.content.html(e);
break;case"object":this.content.html("");e.attr("data-jbox-content-appended",1).appendTo(this.content).css({display:"block"});break;}d!=this.wrapper.outerWidth()&&this._setTitleWidth();
this.options.draggable&&this._draggable();!c&&this.options.repositionOnContent&&(f!=this.wrapper.outerHeight()||d!=this.wrapper.outerWidth())&&this.position();
return this;};a.prototype.setDimensions=function(c,d,e){!this.wrapper&&this._create();d==undefined&&(d="auto");this.content.css(c,this._getInt(d));c=="width"&&this._setTitleWidth();
(e==undefined||e)&&this.position();};a.prototype.setWidth=function(c,d){this.setDimensions("width",c,d);};a.prototype.setHeight=function(c,d){this.setDimensions("height",c,d);
};a.prototype.position=function(h){!h&&(h={});h=b.extend(true,this.options,h);this.target=h.target||this.target||b(window);!(this.target instanceof b||this.target=="mouse")&&(this.target=b(this.target));
if(!this.target.length){return this;}this.content.css({width:this._getInt(h.width,"width"),height:this._getInt(h.height,"height"),minWidth:this._getInt(h.minWidth,"width"),minHeight:this._getInt(h.minHeight,"height"),maxWidth:this._getInt(h.maxWidth,"width"),maxHeight:this._getInt(h.maxHeight,"height"),});
this._setTitleWidth();var f=this._exposeDimensions();this.target!="mouse"&&!this.target.data("jBox-"+this.id+"-fixed")&&this.target.data("jBox-"+this.id+"-fixed",(this.target[0]!=b(window)[0]&&(this.target.css("position")=="fixed"||this.target.parents().filter(function(){return b(this).css("position")=="fixed";
}).length>0))?"fixed":"static");var r={x:b(window).outerWidth(),y:b(window).outerHeight(),top:(h.fixed&&this.target.data("jBox-"+this.id+"-fixed")?0:b(window).scrollTop()),left:(h.fixed&&this.target.data("jBox-"+this.id+"-fixed")?0:b(window).scrollLeft())};
r.bottom=r.top+r.y;r.right=r.left+r.x;try{var A=this.target.offset();}catch(x){var A={top:0,left:0};}if(this.target!="mouse"&&this.target.data("jBox-"+this.id+"-fixed")=="fixed"&&h.fixed){A.top=A.top-b(window).scrollTop();
A.left=A.left-b(window).scrollLeft();}var q={x:this.target=="mouse"?12:this.target.outerWidth(),y:this.target=="mouse"?20:this.target.outerHeight(),top:this.target=="mouse"&&h.mouseTarget?h.mouseTarget.top:(A?A.top:0),left:this.target=="mouse"&&h.mouseTarget?h.mouseTarget.left:(A?A.left:0)};
var z=h.outside&&!(h.position.x=="center"&&h.position.y=="center");var k={x:r.x-h.adjustDistance.left-h.adjustDistance.right,y:r.y-h.adjustDistance.top-h.adjustDistance.bottom,left:!z?0:(q.left-b(window).scrollLeft()-h.adjustDistance.left),right:!z?0:(r.x-q.left+b(window).scrollLeft()-q.x-h.adjustDistance.right),top:!z?0:(q.top-b(window).scrollTop()-this.options.adjustDistance.top),bottom:!z?0:(r.y-q.top+b(window).scrollTop()-q.y-h.adjustDistance.bottom),};
var s={x:(h.outside=="x"||h.outside=="xy")&&b.type(h.position.x)!="number"?h.position.x:null,y:(h.outside=="y"||h.outside=="xy")&&b.type(h.position.y)!="number"?h.position.y:null};
var n={x:false,y:false};(s.x&&f.x>k[s.x]&&k[this._getOpp(s.x)]>k[s.x])&&(s.x=this._getOpp(s.x))&&(n.x=true);(s.y&&f.y>k[s.y]&&k[this._getOpp(s.y)]>k[s.y])&&(s.y=this._getOpp(s.y))&&(n.y=true);
if(h.responsiveWidth||h.responsiveHeight){var p=function(){if(h.responsiveWidth&&f.x>k[s.x||"x"]){var e=k[s.x||"x"]-(this.pointer&&z&&h.outside=="x"?this.pointer.dimensions.x:0)-parseInt(this.container.css("border-left-width"))-parseInt(this.container.css("border-right-width"));
this.content.css({width:e>this.options.responsiveMinWidth?e:null,minWidth:e<parseInt(this.content.css("minWidth"))?0:null});this._setTitleWidth();}f=this._exposeDimensions();
}.bind(this);h.responsiveWidth&&p();h.responsiveWidth&&!n.y&&(s.y&&f.y>k[s.y]&&k[this._getOpp(s.y)]>k[s.y])&&(s.y=this._getOpp(s.y))&&(n.y=true);var c=function(){if(h.responsiveHeight&&f.y>k[s.y||"y"]){var e=function(){if(!this.titleContainer&&!this.footer){return 0;
}if(this.wrapper.css("display")=="none"){this.wrapper.css("display","block");var D=(this.titleContainer?this.titleContainer.outerHeight():0)+(this.footer?this.footer.outerHeight():0);
this.wrapper.css("display","none");}else{var D=(this.titleContainer?this.titleContainer.outerHeight():0)+(this.footer?this.footer.outerHeight():0);}return D||0;
}.bind(this);var C=k[s.y||"y"]-(this.pointer&&z&&h.outside=="y"?this.pointer.dimensions.y:0)-e()-parseInt(this.container.css("border-top-width"))-parseInt(this.container.css("border-bottom-width"));
this.content.css({height:C>this.options.responsiveMinHeight?C:null});this._setTitleWidth();}f=this._exposeDimensions();}.bind(this);h.responsiveHeight&&c();
h.responsiveHeight&&!n.x&&(s.x&&f.x>k[s.x]&&k[this._getOpp(s.x)]>k[s.x])&&(s.x=this._getOpp(s.x))&&(n.x=true);if(h.adjustPosition&&h.adjustPosition!="move"){n.x&&p();
n.y&&c();}}var m={};var g=function(C){if(b.type(h.position[C])=="number"){m[h.attributes[C]]=h.position[C];return;}var e=h.attributes[C]=(C=="x"?"left":"top");
m[e]=q[e];if(h.position[C]=="center"){if(h.followMouse){m[e]=Math.ceil(this.mouse[C]-f[C]/2);}else{m[e]+=Math.ceil((q[C]-f[C])/2);}(this.target!="mouse"&&this.target[0]&&this.target[0]==b(window)[0])&&(m[e]+=(h.adjustDistance[e]-h.adjustDistance[this._getOpp(e)])*0.5);
return;}if(h.followMouse){m[e]=this.mouse[C];}else{(e!=h.position[C])&&(m[e]+=q[C]-f[C]);(h.outside==C||h.outside=="xy")&&(m[e]+=f[C]*(e!=h.position[C]?1:-1));
}}.bind(this);g("x");g("y");if(this.pointer&&h.pointTo=="target"&&b.type(h.position.x)!="number"&&b.type(h.position.y)!="number"){var j=0;switch(this.pointer.align){case"center":if(h.position[this._getOpp(h.outside)]!="center"){j+=(f[this._getOpp(h.outside)]/2);
}break;default:switch(h.position[this._getOpp(h.outside)]){case"center":j+=((f[this._getOpp(h.outside)]/2)-(this.pointer.dimensions[this._getOpp(h.outside)]/2))*(this.pointer.align==this._getTL(this.pointer.align)?1:-1);
break;default:j+=(this.pointer.align!=h.position[this._getOpp(h.outside)])?(this.dimensions[this._getOpp(h.outside)]*(b.inArray(this.pointer.align,["top","left"])!==-1?1:-1))+((this.pointer.dimensions[this._getOpp(h.outside)]/2)*(b.inArray(this.pointer.align,["top","left"])!==-1?-1:1)):(this.pointer.dimensions[this._getOpp(h.outside)]/2)*(b.inArray(this.pointer.align,["top","left"])!==-1?1:-1);
break;}break;}j*=(h.position[this._getOpp(h.outside)]==this.pointer.alignAttribute?-1:1);j+=this.pointer.offset*(this.pointer.align==this._getOpp(this._getTL(this.pointer.align))?1:-1);
m[this._getTL(this._getOpp(this.pointer.xy))]+=j;}m[h.attributes.x]+=h.offset.x;m[h.attributes.y]+=h.offset.y;this.wrapper.css(m);if(h.adjustPosition){if(this.positionAdjusted){this.pointer&&this.wrapper.css("padding",0).css("padding-"+this._getOpp(this.outside),this.pointer.dimensions[this._getXY(this.outside)]).removeClass("jBox-pointerPosition-"+this._getOpp(this.pointer.position)).addClass("jBox-pointerPosition-"+this.pointer.position);
this.pointer&&this.pointer.element.attr("class","jBox-pointer jBox-pointer-"+this._getOpp(this.outside)).css(this.pointer.margin);this.positionAdjusted=false;
this.flipped=false;}var t=(r.top>m.top-(h.adjustDistance.top||0)),l=(r.right<m.left+f.x+(h.adjustDistance.right||0)),B=(r.bottom<m.top+f.y+(h.adjustDistance.bottom||0)),o=(r.left>m.left-(h.adjustDistance.left||0)),y=o?"left":(l?"right":null),w=t?"top":(B?"bottom":null),v=y||w;
if(v){var i=function(e){if(h.followMouse){this.wrapper.css(this._getTL(e),m[this._getTL(e)]+((f[this._getXY(e)]+(h.offset[this._getXY(e)]*(e=="top"||e=="left"?-2:2)))*(e=="top"||e=="left"?1:-1)));
}else{this.wrapper.css(this._getTL(e),m[this._getTL(e)]+((f[this._getXY(e)]+(h.offset[this._getXY(e)]*(e=="top"||e=="left"?-2:2))+q[this._getXY(e)])*(e=="top"||e=="left"?1:-1)));
}this.pointer&&this.wrapper.removeClass("jBox-pointerPosition-"+this.pointer.position).addClass("jBox-pointerPosition-"+this._getOpp(this.pointer.position)).css("padding",0).css("padding-"+e,this.pointer.dimensions[this._getXY(e)]);
this.pointer&&this.pointer.element.attr("class","jBox-pointer jBox-pointer-"+e);this.positionAdjusted=true;this.flipped=true;}.bind(this);n.x&&i(this.options.position.x);
n.y&&i(this.options.position.y);var u=(this._getXY(this.outside)=="x")?w:y;if(this.pointer&&h.pointTo=="target"&&h.adjustPosition!="flip"&&this._getXY(u)==this._getOpp(this._getXY(this.outside))){if(this.pointer.align=="center"){var d=(f[this._getXY(u)]/2)-(this.pointer.dimensions[this._getOpp(this.pointer.xy)]/2)-(parseInt(this.pointer.element.css("margin-"+this.pointer.alignAttribute))*(u!=this._getTL(u)?-1:1));
}else{var d=(u==this.pointer.alignAttribute)?parseInt(this.pointer.element.css("margin-"+this.pointer.alignAttribute)):f[this._getXY(u)]-parseInt(this.pointer.element.css("margin-"+this.pointer.alignAttribute))-this.pointer.dimensions[this._getXY(u)];
}spaceDiff=(u==this._getTL(u))?r[this._getTL(u)]-m[this._getTL(u)]+h.adjustDistance[u]:(r[this._getOpp(this._getTL(u))]-m[this._getTL(u)]-h.adjustDistance[u]-f[this._getXY(u)])*-1;
if(u==this._getOpp(this._getTL(u))&&m[this._getTL(u)]-spaceDiff<r[this._getTL(u)]+h.adjustDistance[this._getTL(u)]){spaceDiff-=r[this._getTL(u)]+h.adjustDistance[this._getTL(u)]-(this.pos[this._getTL(u)]-spaceDiff);
}spaceDiff=Math.min(spaceDiff,d);if(spaceDiff<=d&&spaceDiff>0){this.pointer.element.css("margin-"+this.pointer.alignAttribute,parseInt(this.pointer.element.css("margin-"+this.pointer.alignAttribute))-(spaceDiff*(u!=this.pointer.alignAttribute?-1:1)));
this.wrapper.css(this._getTL(u),m[this._getTL(u)]+(spaceDiff*(u!=this._getTL(u)?-1:1)));this.positionAdjusted=true;}}}}this._fireEvent("onPosition");return this;
};a.prototype.open=function(d){!d&&(d={});if(this.isDestroyed){return false;}!this.wrapper&&this._create();!this._styles&&(this._styles=b("<style/>").append(this._animationCSS).appendTo(b("head")));
this.timer&&clearTimeout(this.timer);this._blockBodyClick();if(this.isDisabled){return this;}var c=function(){this.source&&this.options.getTitle&&(this.source.attr(this.options.getTitle)&&this.setTitle(this.source.attr(this.options.getTitle)),true);
this.source&&this.options.getContent&&(this.source.data("jBox-getContent")?this.setContent(this.source.data("jBox-getContent"),true):(this.source.attr(this.options.getContent)?this.setContent(this.source.attr(this.options.getContent),true):(this.options.getContent=="html"?this.setContent(this.source.html(),true):null)));
this._fireEvent("onOpen");if((this.options.ajax&&(this.options.ajax.url||(this.source&&this.source.attr(this.options.ajax.getURL)))&&(!this.ajaxLoaded||this.options.ajax.reload))||(d.ajax&&(d.ajax.url||d.ajax.data))){(this.options.ajax.reload!="strict"&&this.source&&this.source.data("jBox-ajax-data")&&!(d.ajax&&(d.ajax.url||d.ajax.data)))?this.setContent(this.source.data("jBox-ajax-data")):this.ajax((d.ajax||null),true);
}(!this.positionedOnOpen||this.options.repositionOnOpen)&&this.position(d)&&(this.positionedOnOpen=true);this.isClosing&&this._abortAnimation();if(!this.isOpen){this.isOpen=true;
this.options.autoClose&&(this.options.delayClose=this.options.autoClose)&&this.close();this._attachEvents();this.options.blockScroll&&b("body").addClass("jBox-blockScroll-"+this.id);
this.options.overlay&&this._showOverlay();this.options.animation&&!this.isClosing&&this._animate("open");this.options.audio&&this.options.audio.open&&this.audio(this.options.audio.open,this.options.volume.open);
if(this.options.fade){this.wrapper.stop().animate({opacity:1},{queue:false,duration:this.options.fade,start:function(){this.isOpening=true;this.wrapper.css({display:"block"});
}.bind(this),always:function(){this.isOpening=false;setTimeout(function(){this.positionOnFadeComplete&&this.position()&&(this.positionOnFadeComplete=false);
}.bind(this),10);}.bind(this)});}else{this.wrapper.css({display:"block",opacity:1});this.positionOnFadeComplete&&this.position()&&(this.positionOnFadeComplete=false);
}}}.bind(this);this.options.delayOpen&&!this.isOpen&&!this.isClosing&&!d.ignoreDelay?(this.timer=setTimeout(c,this.options.delayOpen)):c();return this;
};a.prototype.close=function(d){d||(d={});if(this.isDestroyed||this.isClosing){return false;}this.timer&&clearTimeout(this.timer);this._blockBodyClick();
if(this.isDisabled){return this;}var g=function(){this._fireEvent("onClose");if(this.isOpen){this.isOpen=false;this._detachEvents();this.options.blockScroll&&b("body").removeClass("jBox-blockScroll-"+this.id);
this.options.overlay&&this._hideOverlay();this.options.animation&&!this.isOpening&&this._animate("close");this.options.audio&&this.options.audio.close&&this.audio(this.options.audio.close,this.options.volume.close);
if(this.options.fade){this.wrapper.stop().animate({opacity:0},{queue:false,duration:this.options.fade,start:function(){this.isClosing=true;}.bind(this),complete:function(){this.wrapper.css({display:"none"});
this._fireEvent("onCloseComplete");}.bind(this),always:function(){this.isClosing=false;}.bind(this)});}else{this.wrapper.css({display:"none",opacity:0});
this._fireEvent("onCloseComplete");}}}.bind(this);if(d.ignoreDelay){g();}else{if((this.options.delayOnHover||this.options.showCountdown)&&this.options.delayClose>10){var c=this;
var f=this.options.delayClose;var h=Date.now();if(this.options.showCountdown&&!this.inner){var e=b('<div class="jBox-countdown"></div>');this.inner=b('<div class="jBox-countdown_inner"></div>');
e.prepend(this.inner);b("#"+this.id).append(e);}this.countdown=function(){var i=Date.now();if(!c.isHovered){f-=i-h;}h=i;if(f>0){if(c.options.showCountdown){c.inner.css("width",(f*100/c.options.delayClose)+"%");
}window.requestAnimationFrame(c.countdown);}else{g();}};window.requestAnimationFrame(this.countdown);}else{this.timer=setTimeout(g,Math.max(this.options.delayClose,10));
}}return this;};a.prototype.toggle=function(c){this[this.isOpen?"close":"open"](c);return this;};a.prototype.disable=function(){this.isDisabled=true;return this;
};a.prototype.enable=function(){this.isDisabled=false;return this;};a.prototype.hide=function(){this.disable();this.wrapper&&this.wrapper.css({display:"none"});
return this;};a.prototype.show=function(){this.enable();this.wrapper&&this.wrapper.css({display:"block"});return this;};a.prototype.ajax=function(g,c){g||(g={});
b.each([["getData","data"],["getURL","url"]],function(k,l){(this.options.ajax[l[0]]&&!g[l[1]]&&this.source&&this.source.attr(this.options.ajax[l[0]])!=undefined)&&(g[l[1]]=this.source.attr(this.options.ajax[l[0]])||"");
}.bind(this));var e=b.extend(true,{},this.options.ajax);this.ajaxRequest&&this.ajaxRequest.abort();var h=g.beforeSend||e.beforeSend||function(){};var d=g.complete||e.complete||function(){};
var j=g.success||e.success||function(){};var f=g.error||e.error||function(){};var i=b.extend(true,e,g);i.beforeSend=function(){this.wrapper.addClass("jBox-loading");
i.spinner&&(this.spinnerDelay=setTimeout(function(){this.wrapper.addClass("jBox-loading-spinner");i.spinnerReposition&&(c?(this.positionOnFadeComplete=true):this.position());
this.spinner=b(i.spinner!==true?i.spinner:'<div class="jBox-spinner"></div>').appendTo(this.container);this.titleContainer&&this.spinner.css("position")=="absolute"&&this.spinner.css({transform:"translateY("+(this.titleContainer.outerHeight()*0.5)+"px)"});
}.bind(this),(this.content.html()==""?0:(i.spinnerDelay||0))));(h.bind(this))();}.bind(this);i.complete=function(k){this.spinnerDelay&&clearTimeout(this.spinnerDelay);
this.wrapper.removeClass("jBox-loading jBox-loading-spinner jBox-loading-spinner-delay");this.spinner&&this.spinner.length&&this.spinner.remove()&&i.spinnerReposition&&(c?(this.positionOnFadeComplete=true):this.position());
this.ajaxLoaded=true;(d.bind(this))(k);}.bind(this);i.success=function(k){i.setContent&&this.setContent(k,true)&&(c?(this.positionOnFadeComplete=true):this.position());
i.setContent&&this.source&&this.source.data("jBox-ajax-data",k);(j.bind(this))(k);}.bind(this);i.error=function(k){(f.bind(this))(k);}.bind(this);this.ajaxRequest=b.ajax(i);
return this;};a.prototype.audio=function(c,f){if(!c){return this;}!a._audio&&(a._audio={});if(!a._audio[c]){var d=b("<audio/>");b("<source/>",{src:c+".mp3"}).appendTo(d);
b("<source/>",{src:c+".ogg"}).appendTo(d);a._audio[c]=d[0];}a._audio[c].volume=Math.min(((f!=undefined?f:100)/100),1);try{a._audio[c].pause();a._audio[c].currentTime=0;
}catch(g){}a._audio[c].play();return this;};a._animationSpeeds={tada:1000,tadaSmall:1000,flash:500,shake:400,pulseUp:250,pulseDown:250,popIn:250,popOut:250,fadeIn:200,fadeOut:200,slideUp:400,slideRight:400,slideLeft:400,slideDown:400};
a.prototype.animate=function(d,c){!c&&(c={});!this.animationTimeout&&(this.animationTimeout={});!c.element&&(c.element=this.wrapper);!c.element.data("jBox-animating-id")&&c.element.data("jBox-animating-id",a._getUniqueElementID());
if(c.element.data("jBox-animating")){c.element.removeClass(c.element.data("jBox-animating")).data("jBox-animating",null);this.animationTimeout[c.element.data("jBox-animating-id")]&&clearTimeout(this.animationTimeout[c.element.data("jBox-animating-id")]);
}c.element.addClass("jBox-animated-"+d).data("jBox-animating","jBox-animated-"+d);this.animationTimeout[c.element.data("jBox-animating-id")]=setTimeout((function(){c.element.removeClass(c.element.data("jBox-animating")).data("jBox-animating",null);
c.complete&&c.complete();}),a._animationSpeeds[d]);};a.prototype.destroy=function(){this.detach();this.isOpen&&this.close({ignoreDelay:true});this.wrapper&&this.wrapper.remove();
this.overlay&&this.overlay.remove();this._styles&&this._styles.remove();this.isDestroyed=true;return this;};a._getUniqueID=(function(){var c=1;return function(){return c++;
};}());a._getUniqueElementID=(function(){var c=1;return function(){return c++;};}());a._pluginOptions={};a.plugin=function(d,c){a._pluginOptions[d]=c;};
b.fn.jBox=function(d,c){!d&&(d={});!c&&(c={});return new a(d,b.extend(c,{attach:this}));};return a;}));