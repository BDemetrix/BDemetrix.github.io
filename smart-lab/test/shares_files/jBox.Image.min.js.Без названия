jQuery(document).ready(function(){new jBox.plugin("Image",{src:"href",gallery:"data-jbox-image",imageLabel:"title",imageFade:360,imageSize:"contain",imageCounter:false,imageCounterSeparator:"/",target:window,attach:"[data-jbox-image]",fixed:true,blockScroll:true,closeOnEsc:true,closeOnClick:"button",closeButton:true,overlay:true,animation:"zoomIn",preventDefault:true,width:"100%",height:"100%",adjustDistance:{top:40,right:5,bottom:40,left:5},_onAttach:function(b){this.images=this.images||{};
if(b.data("jBox-image-gallery")){return;}var a=b.attr(this.options.gallery)||"default";!this.images[a]&&(this.images[a]=[]);this.images[a].push({src:b.attr(this.options.src),label:(b.attr(this.options.imageLabel)||"")});
this.options.imageLabel=="title"&&b.removeAttr("title");b.data("jBox-image-gallery",a);b.data("jBox-image-id",(this.images[a].length-1));},_onInit:function(){this.currentImage={};
this.imageZIndex=1;var b=function(d,j,g,f,e,h,c){if(jQuery("#jBox-image-"+d+"-"+j).length){return;}var i=jQuery("<div/>",{id:"jBox-image-"+d+"-"+j,"class":"jBox-image-container"+(e?" jBox-image-not-found":"")+(!f&&!g?" jBox-image-"+d+"-current":""),"data-width":h,"data-height":c}).css({backgroundImage:e?"":'url("'+this.images[d][j].src+'")',backgroundSize:this.options.imageSize,opacity:(f?1:0),zIndex:(g?0:this.imageZIndex++)}).appendTo(this.content);
jQuery("<div/>",{id:"jBox-image-label-"+d+"-"+j,"class":"jBox-image-label"+(f?" active":"")}).html(this.images[d][j].label).click(function(){$(this).toggleClass("expanded");
}).appendTo(this.imageLabel);!f&&!g&&i.animate({opacity:1},this.options.imageFade);}.bind(this);var a=function(c,d){jQuery(".jBox-image-label.active").removeClass("active expanded");
jQuery("#jBox-image-label-"+c+"-"+d).addClass("active");};this.checkSize=function(c){if((this.content.width()<=c.data("width"))||(this.content.height()<=c.data("height"))){c.css("backgroundSize","contain");
}else{c.css("backgroundSize","auto");}};this.showImage=function(d){if(d!="open"){var c=this.currentImage.gallery;var f=this.currentImage.id+(1*(d=="prev")?-1:1);
f=f>(this.images[c].length-1)?0:(f<0?(this.images[c].length-1):f);}else{var c=this.source.data("jBox-image-gallery");var f=this.source.data("jBox-image-id");
jQuery(".jBox-image-pointer-prev, .jBox-image-pointer-next").css({display:(this.images[c].length>1?"block":"none")});}if(jQuery(".jBox-image-"+c+"-current").length){jQuery(".jBox-image-"+c+"-current").removeClass("jBox-image-"+c+"-current").animate({opacity:0},(d=="open")?0:this.options.imageFade);
}this.currentImage={gallery:c,id:f};if(jQuery("#jBox-image-"+c+"-"+f).length){jQuery("#jBox-image-"+c+"-"+f).addClass("jBox-image-"+c+"-current").css({zIndex:this.imageZIndex++,opacity:0}).animate({opacity:1},(d=="open")?0:this.options.imageFade);
this.checkSize(jQuery("#jBox-image-"+c+"-"+f));a(c,f);}else{this.wrapper.addClass("jBox-image-loading");jQuery('<img src="'+this.images[c][f].src+'"/>').each(function(){var g=new Image();
g.onload=function(){b(c,f,false,null,false,g.width,g.height);this.checkSize(jQuery("#jBox-image-"+c+"-"+f));a(c,f);this.wrapper.removeClass("jBox-image-loading");
}.bind(this);g.onerror=function(){b(c,f,false,null,true,g.width,g.height);a(c,f);this.wrapper.removeClass("jBox-image-loading");}.bind(this);g.src=this.images[c][f].src;
}.bind(this));}if(this.imageCounter){if(this.images[c].length>1){this.wrapper.addClass("jBox-image-has-counter");this.imageCounter.find(".jBox-image-counter-all").html(this.images[c].length);
this.imageCounter.find(".jBox-image-counter-current").html(f+1);}else{this.wrapper.removeClass("jBox-image-has-counter");}}if(this.images[c].length>1){var e=f+1;
e=e>(this.images[c].length-1)?0:(e<0?(this.images[c].length-1):e);(!jQuery("#jBox-image-"+c+"-"+e).length)&&jQuery('<img src="'+this.images[c][e].src+'"/>').each(function(){var g=new Image();
g.onload=function(){b(c,e,true,null,false,g.width,g.height);}.bind(this);g.onerror=function(){b(c,e,true,null,true,g.width,g.height);}.bind(this);g.src=this.images[c][e].src;
}.bind(this));}};},_onCreated:function(){this.imageLabel=jQuery("<div/>",{"class":"jBox-image-label-container"}).appendTo(this.wrapper);this.imageLabel.append(jQuery("<div/>",{"class":"jBox-image-pointer-prev",click:function(){this.showImage("prev");
}.bind(this)})).append(jQuery("<div/>",{"class":"jBox-image-pointer-next",click:function(){this.showImage("next");}.bind(this)}));if(this.options.imageCounter){this.imageCounter=jQuery("<div/>",{"class":"jBox-image-counter-container"}).appendTo(this.wrapper);
this.imageCounter.append(jQuery("<span/>",{"class":"jBox-image-counter-current"})).append(jQuery("<span/>").html(this.options.imageCounterSeparator)).append(jQuery("<span/>",{"class":"jBox-image-counter-all"}));
}},_onOpen:function(){jQuery(document).on("keyup.jBox-Image-"+this.id,function(a){(a.keyCode==37)&&this.showImage("prev");(a.keyCode==39)&&this.showImage("next");
}.bind(this));this.showImage("open");},_onClose:function(){jQuery(document).off("keyup.jBox-Image-"+this.id);},_onCloseComplete:function(){this.wrapper.find(".jBox-image-container").css("opacity",0);
}});});