var isMobile={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return isMobile.Android()||isMobile.BlackBerry()||isMobile.iOS()||isMobile.Opera()||isMobile.Windows()}};class PsyTestsCalculator{constructor(t){this.handler=t,this.errCSS="color: red; border: 2px solid red; font-weight: bold;",this.init()}init(){this.handler.getResult?(this.el=document.querySelector(".js-psy-test-body"),this.el?(this.groups=this.el.querySelectorAll(".js-psy-test-group"),this.groups.length||this._errorMsg(" Не найден селектор .js-psy-test-group")):this._errorMsg(" Не найден селектор .js-psy-test-body")):this._errorMsg(" Не задана функция для возвращения результата теста ")}calc(){let t=0;const e={},s=this.groups.length;for(let n=0;n<s;n++){const s=this.groups[n],i=Array.from(s.querySelectorAll(".js-psy-test-input"));if(!i.length)throw this._errorMsg(" Не найден селектор .js-psy-test-input"),"Некорректная HTML структура теста BecksAlarmScale";i.find((t=>t.checked))||(s.classList.add("_error"),e.error="Не выбран ответ в группе"),e.error||i.forEach((e=>{e.checked?(t+=+e.value,e.setAttribute("checked",!0)):e.setAttribute("disabled",!0)}))}return e.error?(e.errTarget=this.el.querySelector(".js-psy-test-group._error"),e):this.handler.getResult(t)}_errorMsg(t=""){console.log(`%c "${t}" `,this.errCSS),alert("К сожалению тест сломался. \n\nСообщите об этом Инне Моисеевой, пожалуйста! \n\n telegram: @innasteplom")}}class PsyTestsManager{constructor(t){this.handler=t,this.errCSS="color: red; border: 2px solid red; font-weight: bold;",this.init()}init(){if(this.el=document.querySelector(".js-psy-test"),this.el){if(this.testName=this.el.getAttribute("data-test-name"),this.testName||this._errorMsg('Не задано имя теста в data атрибуте блока ".js-psy-test"'),"object"!=typeof this.handler)return this._errorMsg(`Ошибка класса обработчика теста: ${this.testName}. Класс не найден.`),void console.log(e);this.inputs=this.el.querySelectorAll(".js-psy-test-input"),this.calcBtn=this.el.querySelector(".js-psy-test-btn-calc"),this.resultContainer=this.el.querySelector(".js-psy-test-result"),this.saveBtn=this.el.querySelector(".js-psy-test-btn-save"),this.againBtn=this.el.querySelector(".js-psy-test-btn-again");for(let t in this)if(!this[t])return void this._errorMsg(`Ошибка инициализации PsyTestsManager. Не задано поле: ${t}`);this.style=document.querySelector(".js-psy-test-style"),this.againBtn.href=location.href,this.calcBtn.addEventListener("click",(()=>{this._calc()})),this.saveBtn.addEventListener("click",(()=>{this._save()})),this.inputs.forEach((t=>t.addEventListener("change",(()=>{const e=t.closest(".js-psy-test-group._error");e&&(e.classList.remove("_error"),setTimeout((()=>{const t=this.el.querySelector(".js-psy-test-group._error,  .js-psy-test-footer");t&&t.scrollIntoView(!0)}),10))}))))}else this._errorMsg('%c Не найден селектор ".js-psy-test" ')}_calc(){let t={};try{t=this.handler.calc()}catch(t){return this._errorMsg(`Ошибка вычисления теста ${this.testName}`),console.log(t),!1}if(t.error)return t.errTarget&&t.errTarget.scrollIntoView(!0),!1;if(!t.modifier||!t.html)throw this._errorMsg(),` Ошибка вычисления результата теста ${this.testName}. `;this.calcBtn.remove(),this.resultContainer.innerHTML=t.html,this.resultContainer.classList.add(`psy-test__info--${t.modifier}`),this.resultContainer.classList.remove("_hidden"),this.againBtn.classList.remove("_hidden"),this.saveBtn.classList.remove("_hidden"),this.againBtn.href=location.href,this.resultContainer.scrollIntoView()}_save(){if(this.saveBtn.style.display="none",!this.style)return alert("К сожалению невозможно сохранить тест. \n\nСообщите об этом владельцу сайта, пожалуйста!"),void console.log("%c Не найдены стили для сохранения ",this.errCSS);this.style.className="";let t=this.el.getAttribute("data-test-link");const e=this.againBtn.href;this.againBtn.href=t||location.origin;let s=this.el.getAttribute("data-test-file-name").replace(" ","_")??"Test_";s=`${s}_от_${this._getDate()}.html`;let n=` <!DOCTYPE html>\n\t\t\t\t\t<html lang="ru">\n\t\t\t\t\t\t<head>\n\t\t\t\t\t\t\t\x3c!-- WEB-разработчик данного теста - Дмитрий Богданов https://bdemetrix.github.io --\x3e\n\t\t\t\t\t\t\t<title>@@title</title>\n\t\t\t\t\t\t\t<meta charset="UTF-8">\n\t\t\t\t\t\t\t<meta name="format-detection" content="telephone=no">\n\t\t\t\t\t\t\t<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">\n\t\t\t\t\t\t\t${this.style.outerHTML}\n\t\t\t\t\t\t</head>\n\t\t\t\t\t\t<body class = "_container">\n\t\t\t\t\t\t\t${this.el.outerHTML}\n\t\t\t\t\t\t\t<scr`;n+="ipt>\n                window.addEventListener(\"DOMContentLoaded\", () => {\n                    setTimeout(() => {\n\t\t\t\t        document.getElementById('psy-test-result').scrollIntoView(true);\n                    }, 100);\n                })\n\t\t\t\t</scr",n+="ipt>\n\t\t\t\t\t\t</body>\n\t\t\t\t\t</html>",this.againBtn.href=e;const i=new Blob([n],{type:"text/plain"}),r=document.createElement("a");r.setAttribute("href",URL.createObjectURL(i)),r.setAttribute("download",s),r.click(),this.saveBtn.style.display=""}_getDate(){let t=new Date,e=t.getFullYear(),s=t.getMonth()+1;s=s<10?"0"+s:s;let n=t.getDate();n=n<10?"0"+n:n;let i=t.getHours();i=i<10?"0"+i:i;let r=t.getMinutes();return r=r<10?"0"+r:r,`${n}_${s}_${e}__${i}_${r}`}_errorMsg(t){console.log(`%c ${t} `,this.errCSS),alert("К сожалению тест сломался. \n\nСообщите об этом Инне Моисеевой, пожалуйста! \n\n telegram: @innasteplom")}}class BecksAlarmScale{constructor(){this.init()}init(){try{const t=new PsyTestsCalculator(this);new PsyTestsManager(t)}catch(t){throw alert("К сожалению тест сломался. \n\nСообщите об этом Инне Моисеевой, пожалуйста! \n\n telegram: @innasteplom"),t}}getResult(t=0){const e=Math.floor(1e4*t/63)/100,s=`\n        <div class = "psy-test__info-scale">\n            <div class = "psy-test__info-scale-wrap">\n                <div class="psy-test__info-scale-cells" style = "background-size: ${Math.floor(1e4/63)/100}%, 100%;"></div> \n                <div class="psy-test__info-scale-marker" style="width: ${e}%;" ></div>\n                <div class="psy-test__info-scale-cover"></div> \n            </div> \n            <div class="psy-test__info-scale-map">\n                <div class="psy-test__info-scale-item" style="width: 33.33%;">\n                    <span>[ 0 </span><span>21 ]</span>\n                </div>\n                <div class="psy-test__info-scale-item" style="width: 21%;">\n                    <span>[ 22 </span><span>35 ]</span>\n                </div>\n                <div class="psy-test__info-scale-item" style="width: 45.67%;">\n                    <span>[ 36 </span><span>63 ]</span >\n                </div> \n            </div> \n        </div> `,n={};return t>36?(n.modifier="red",n.html=`Потенциально опасный уровень беспокойства и&nbsp;тревоги <div class="psy-test__info-count">Набранных баллов: ${t} </div>`+s):t>22?(n.modifier="yellow",n.html=`Cредняя тревожность <div class="psy-test__info-count">Набранных баллов: ${t} </div>`+s):(n.modifier="green",n.html=`Низкая тревожность <div class="psy-test__info-count">Набранных баллов: ${t}</div>`+s),n}}class BecksDepressionScale{constructor(){this.init()}init(){try{const t=new PsyTestsCalculator(this);new PsyTestsManager(t)}catch(t){throw alert("К сожалению тест сломался. \n\nСообщите об этом Инне Моисеевой, пожалуйста! \n\n telegram: @innasteplom"),t}}getResult(t=0){const e=Math.floor(1e4*t/63)/100,s=`\n        <div class = "psy-test__info-scale">\n            <div class = "psy-test__info-scale-wrap">\n                <div class="psy-test__info-scale-cells" style="background-size: ${Math.floor(1e4/63)/100}%, 100%;"></div> \n                <div class="psy-test__info-scale-marker" style="width: ${e}%;" ></div>\n                <div class="psy-test__info-scale-cover"></div> \n            </div> \n            <div class="psy-test__info-scale-map psy-test__info-scale-map--min">\n                <div class = "psy-test__info-scale-item" style="width: 14.29%;">\n                    <span>[ 0 </span><span>9 ]</span>\n                </div>\n                <div class="psy-test__info-scale-item" style="width: 14.29%;">\n                    <span>[ 10 </span><span>18 ]</span>\n                </div> \n                <div class = "psy-test__info-scale-item" style="width: 17.46%;">\n                    <span> [19 </span><span>29 ]</span >\n                </div>\n                <div class = "psy-test__info-scale-item" style="width: 53.96%;">\n                    <span>[ 30 </span><span>63 ]</span >\n                </div> \n            </div> \n        </div> `,n={};return t>29?(n.modifier="red",n.html=`Тяжелая депрессия <div class="psy-test__info-count">Набранных баллов: ${t} </div>`+s):t>18?(n.modifier="orange",n.html=`Выраженная депрессия (депрессия средней тяжести) <div class="psy-test__info-count">Набранных баллов: ${t} </div>`+s):t>9?(n.modifier="yellow",n.html=`От легкой до&nbsp;умеренной депрессии <div class="psy-test__info-count">Набранных баллов: ${t} </div>`+s):(n.modifier="green",n.html=`Нормальное состояние <div class="psy-test__info-count">Набранных баллов: ${t}</div> `+s),n}}class BecksHopelessnessScale{constructor(){this.init()}init(){try{const t=new PsyTestsCalculator(this);new PsyTestsManager(t)}catch(t){throw alert("К сожалению тест сломался. \n\nСообщите об этом Инне Моисеевой, пожалуйста! \n\n telegram: @innasteplom"),t}}getResult(t=0){const e=Math.floor(1e4*t/20)/100,s=`\n        <div class = "psy-test__info-scale">\n            <div class = "psy-test__info-scale-wrap">\n                <div class="psy-test__info-scale-cells" style="background-size: ${Math.floor(500)/100}%, 100%;"></div> \n                <div class="psy-test__info-scale-marker" style="width: ${e}%;" ></div>\n                <div class="psy-test__info-scale-cover"></div> \n            </div> \n            <div class="psy-test__info-scale-map">\n                <div class = "psy-test__info-scale-item" style="width: 15%;">\n                    <span>[ 0 </span><span>3 ]</span>\n                </div>\n                <div class="psy-test__info-scale-item" style="width: 25%;">\n                    <span>[ 4 </span><span>8 ]</span>\n                </div> \n                <div class = "psy-test__info-scale-item" style="width: 30%;">\n                    <span> [9 </span><span>14 ]</span >\n                </div>\n                <div class = "psy-test__info-scale-item" style="width: 30%;">\n                    <span>[ 15 </span><span>20 ]</span >\n                </div> \n            </div> \n        </div> `,n={};return t>14?(n.modifier="red",n.html=`Безнадежность тяжёлая <div class="psy-test__info-count">Набранных баллов: ${t} </div>`+s):t>8?(n.modifier="orange",n.html=`Безнадежность умеренная <div class="psy-test__info-count">Набранных баллов: ${t} </div>`+s):t>3?(n.modifier="yellow",n.html=`Безнадежность лёгкая <div class="psy-test__info-count">Набранных баллов: ${t} </div>`+s):(n.modifier="green",n.html=`Безнадёжность не выявлена <div class="psy-test__info-count">Набранных баллов: ${t}</div> `+s),n}}class BecksSuicidalScale{constructor(){this.init()}init(){try{const t=new PsyTestsCalculator(this);new PsyTestsManager(t)}catch(t){throw alert("К сожалению тест сломался. \n\nСообщите об этом Инне Моисеевой, пожалуйста! \n\n telegram: @innasteplom"),t}}getResult(t=0){const e=Math.floor(1e4*t/38)/100,s=`\n        <div class = "psy-test__info-scale">\n            <div class = "psy-test__info-scale-wrap">\n                <div class="psy-test__info-scale-cells" style="background-size: ${Math.floor(1e4/38)/100}%, 100%;"></div> \n                <div class="psy-test__info-scale-marker" style="width: ${e}%;" ></div>\n                <div class="psy-test__info-scale-cover"></div> \n            </div> \n            <div class="psy-test__info-scale-map">\n                <div class = "psy-test__info-scale-item" style="width: 15.79%;">\n                    <span>[ 0 </span><span>6 ]</span>\n                </div>\n                <div class="psy-test__info-scale-item" style="width: 84.21%;">\n                    <span>[ 7 </span><span>38 ]</span>\n                </div>\n            </div> \n        </div> `,n={};return n.html=`Риск суицида на&nbsp;момент интервью: ${t}&nbsp;из&nbsp;38 <div class="psy-test__info-count">Пороговое значение: 6 баллов </div>`+s,n.modifier=t>20?"red":t>12?"orange":t>6?"yellow":"green",n}}window.addEventListener("DOMContentLoaded",(()=>{!function(){const t=document.querySelector(".js-burger-menu");if(!t)return;const e=t.querySelectorAll(".js-burger-menu-item-btn");t.addEventListener("click",(s=>{s.target.closest(".js-burger-menu-item-btn")||(t.classList.toggle("_opened"),e.length&&i(e))}));const s=location.hash.replace("#",""),n=document.getElementById(s);function i(t){t.forEach((t=>{t.parent.classList.remove("_opened"),t.inner.setAttribute("style","")}))}n&&n.scrollIntoView(!0),e.length&&e.forEach((s=>{s.parent=s.parentElement,s.inner=t.querySelector(".js-burger-menu-sub-inner"),s.list=t.querySelector(".js-burger-menu-sub-list"),s.addEventListener("click",(t=>{const n=s.parent.classList.contains("_opened");i(e),n||function(t){t.parent.classList.add("_opened"),t.inner.style.height=t.list.offsetHeight+"px"}(s)}))}))}(),function(){const t=document.querySelectorAll(".js-context-menu");t.length&&(t.forEach((t=>{const e=t.querySelectorAll(".js-context-menu-btn");e.length&&e.forEach((e=>{e.addEventListener("click",(e=>{t.classList.toggle("_opened")}))}))})),document.documentElement.addEventListener("click",(t=>{if(t.target.closest(".js-context-menu-btn"))return;document.querySelectorAll(".js-context-menu._opened").forEach((t=>t.classList.remove("_opened")))}),!1))}(),function(){const t=document.querySelector(".psy-test"),e=document.querySelector(".fixed-sign-up");location.search.match("sign_up")&&(t&&(t.parentElement.style.paddingBottom="40px"),e&&e.classList.remove("_hidden"))}()}));